# Match any email-like URL
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Z0-9_!#$%&'*+/=?`{|}~^.-]+@[A-Z0-9.-]+)$ /gravatarize.php?email=$1 [NC,L]

# <Directory />
#   AllowOverride Indexes
#   Options FollowSymLinks
# </Directory>

# Allow PHP source code to render as text for inspection
AddType application/x-httpd-php-source .phps
# RewriteRule ^(.+\.php)s$ $1 [H=application/x-httpd-php-source]
# --or--
RewriteRule ^(.+\.php)s$ $1 [H=php-script]

# Allow examining .htaccess files or .phps files.
#AllowOverride FileInfo
# <FilesMatch "\.phps$">
#   SetHandler application/x-httpd-php-source
# </FilesMatch>
<FilesMatch "\.(htaccess|user\.ini|phps)$">
  Require all granted
</FilesMatch>
